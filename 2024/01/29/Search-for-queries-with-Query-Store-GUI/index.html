<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"http://schema.org","@type":"Website","@id":"https:\/\/claudioessilva.eu\/","author":{"@type":"Person","name":"Cláudio Silva","image":"https://claudioessilva.eu/img/avatar.jpg"},"name":"Cláudio Silva\u0027s Blog","description":"Hey folks, long time no write!\nToday I want to bring a tip that I use every week but I found that most SSMS users are unaware it exists.\nI can understand why! At the moment this isn\u0026rsquo;t the most obvious and user-friendly option. However, it can and hopefully it will improve in the future.\n\u0026ldquo;But\u0026hellip;What is it?\u0026rdquo; I\u0026rsquo;m talking about using the Query Store GUI to search for some portion of text used in a T-SQL query and, with that, find a query that you want to analyze within it.","url":"https:\/\/claudioessilva.eu\/2024\/01\/29\/Search-for-queries-with-Query-Store-GUI\/","keywords":"[]"}</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo 0.126.1 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="Cláudio Silva"><meta name=keywords content><meta name=description content="Hey folks, long time no write!
Today I want to bring a tip that I use every week but I found that most SSMS users are unaware it exists.
I can understand why! At the moment this isn&rsquo;t the most obvious and user-friendly option. However, it can and hopefully it will improve in the future.
&ldquo;But&mldr;What is it?&rdquo; I&rsquo;m talking about using the Query Store GUI to search for some portion of text used in a T-SQL query and, with that, find a query that you want to analyze within it."><meta property="og:description" content="Hey folks, long time no write!
Today I want to bring a tip that I use every week but I found that most SSMS users are unaware it exists.
I can understand why! At the moment this isn&rsquo;t the most obvious and user-friendly option. However, it can and hopefully it will improve in the future.
&ldquo;But&mldr;What is it?&rdquo; I&rsquo;m talking about using the Query Store GUI to search for some portion of text used in a T-SQL query and, with that, find a query that you want to analyze within it."><meta property="og:type" content="article"><meta property="og:title" content="Search for queries with Query Store GUI"><meta name=twitter:title content="Search for queries with Query Store GUI"><meta property="og:url" content="https://claudioessilva.eu/2024/01/29/Search-for-queries-with-Query-Store-GUI/"><meta property="twitter:url" content="https://claudioessilva.eu/2024/01/29/Search-for-queries-with-Query-Store-GUI/"><meta property="og:site_name" content="Cláudio Silva's Blog"><meta property="og:description" content="Hey folks, long time no write!
Today I want to bring a tip that I use every week but I found that most SSMS users are unaware it exists.
I can understand why! At the moment this isn&rsquo;t the most obvious and user-friendly option. However, it can and hopefully it will improve in the future.
&ldquo;But&mldr;What is it?&rdquo; I&rsquo;m talking about using the Query Store GUI to search for some portion of text used in a T-SQL query and, with that, find a query that you want to analyze within it."><meta name=twitter:description content="Hey folks, long time no write!
Today I want to bring a tip that I use every week but I found that most SSMS users are unaware it exists.
I can understand why! At the moment this isn&rsquo;t the most obvious and user-friendly option. However, it can and hopefully it will improve in the future.
&ldquo;But&mldr;What is it?&rdquo; I&rsquo;m talking about using the Query Store GUI to search for some portion of text used in a T-SQL query and, with that, find a query that you want to analyze within it."><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2024-01-29T09:30:00"><meta property="article:modified_time" content="2024-01-29T09:30:00"><meta property="article:tag" content="QueryStore"><meta property="article:tag" content="SQLServer"><meta property="article:tag" content="performance"><meta property="article:tag" content="syndicated"><meta name=twitter:card content="summary"><meta name=twitter:site content="@claudioessilva"><meta name=twitter:creator content="@claudioessilva"><meta property="og:image" content="https://claudioessilva.eu/img/2024/0129/PostCoverImage.png"><meta property="twitter:image" content="https://claudioessilva.eu/img/2024/0129/PostCoverImage.png"><meta property="og:image" content="https://claudioessilva.eu/img/2024/0129/PostCoverImage.png"><meta property="twitter:image" content="https://claudioessilva.eu/img/2024/0129/PostCoverImage.png"><meta property="og:image" content="https://claudioessilva.eu/img/2024/0129/ClickMagnifierGlass.png"><meta property="twitter:image" content="https://claudioessilva.eu/img/2024/0129/ClickMagnifierGlass.png"><title>Search for queries with Query Store GUI</title>
<link rel=icon href=https://claudioessilva.eu/img/favicon.jpg><link rel=canonical href=https://claudioessilva.eu/2024/01/29/Search-for-queries-with-Query-Store-GUI/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://claudioessilva.eu/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css></head><body><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=/ aria-label="Go to homepage">Cláudio Silva's Blog</a></div><a class=header-right-picture href=/#about aria-label="Open the link: /#about"><img class=header-picture src=https://claudioessilva.eu/img/avatar.jpg alt="Author's picture"></a></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=/#about aria-label="Read more about the author"><img class=sidebar-profile-picture src=https://claudioessilva.eu/img/avatar.jpg alt="Author's picture"></a><h4 class=sidebar-profile-name>Cláudio Silva</h4><h5 class=sidebar-profile-bio>Data Platform Architect and PowerShell lover.</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/#about title=About><i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i>
<span class=sidebar-button-desc>About</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/claudioessilva target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://twitter.com/claudioessilva target=_blank rel=noopener title=Twitter><i class="sidebar-button-icon fab fa-lg fa-twitter" aria-hidden=true></i>
<span class=sidebar-button-desc>Twitter</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.linkedin.com/in/claudioessilva target=_blank rel=noopener title=LinkedIn><i class="sidebar-button-icon fab fa-lg fa-linkedin" aria-hidden=true></i>
<span class=sidebar-button-desc>LinkedIn</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/index.xml title=RSS><i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden=true></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul></div><div class=sidebar-container><div style=color:#ebebeb;font-size:25px;text-align:center>dbatools book</div><div style=color:#ebebeb;font-size:15px>Now available! Buy it at manning.com - 50% off with code bldbatools50</div><a href="https://www.manning.com/books/learn-dbatools-in-a-month-of-lunches?utm_source=claudioessilva&utm_medium=affiliate&utm_campaign=affiliate&a_aid=claudioessilva" target=_blank><center><img src=https://images.manning.com/264/352/resize/book/0/998b76f-982a-4661-a020-5d94909f7ea5/LeMaire-HI.png height=300></center></a></div></nav><div class="post-header-cover
text-center" style=background-image:url(/img/2024/0129/PostCoverImage.png);height:30% data-behavior=4></div><div id=main data-behavior=4 class="hasCover
hasCoverMetaOut"><article class=post id=top><div class="post-header main-content-wrap text-center"><h1 class=post-title>Search for queries with Query Store GUI</h1><div class="postShorten-meta post-meta"><time datetime=2024-01-29T09:30:00Z>January 29, 2024</time></div></div><div class="post-content markdown"><div class=main-content-wrap><p>Hey folks, long time no write!</p><p>Today I want to bring a tip that I use every week but I found that most SSMS users are unaware it exists.<br>I can understand why! At the moment this isn&rsquo;t the most obvious and user-friendly option. However, it can and hopefully it will improve in the future.</p><h1 id=butwhat-is-it>&ldquo;But&mldr;What is it?&rdquo;</h1><p>I&rsquo;m talking about using the Query Store GUI to search for some portion of text used in a T-SQL query and, with that, find a query that you want to analyze within it.</p><h2 id=what-is-query-store>What is Query Store?</h2><p>From the <a href=https://learn.microsoft.com/en-us/sql/relational-databases/performance/monitoring-performance-by-using-the-query-store target=_blank rel="noopener noreferrer">documentation
</a>:</p><blockquote><p>The Query Store feature provides you with insight on query plan choice and performance&mldr;</p></blockquote><blockquote><p>&mldr; simplifies performance troubleshooting by helping you quickly find performance differences caused by query plan changes. Query Store automatically captures a history of queries, plans, and runtime statistics, and retains these for your review.</p></blockquote><p>As a reminder, Query Store made its first appearance on SQL Server 2016. With SQL Server 2022, it even comes on by default when you create a database. Until 2022 when you create a new database or if you are doing a migration where the feature was not turned on for the database, you will need to turn it on by yourself.</p><p>Another remark to be made is that this feaute is available not only on SQL Server on-premises but also on Azure SQL Database, Azure SQL Managed Instance and Azure Synapse Analytics (dedicated SQL pool only).</p><h2 id=query-store-dashboards>Query Store dashboards</h2><p>SQL Server provides 7 different dashboards so you can check the queries and analyze the execution plan changes, compare them, among other options</p><p><img src=/img/2024/0129/QueryStoreDashboards.png alt="Query Store dashboards"></p><h2 id=back-to-the-main-question---how-can-we-search-for-specific-queries-using-the-gui>Back to the main question - How can we search for specific queries using the GUI?</h2><p>If you arrive on this page, most probably you were searching if/how it&rsquo;s possible to use the GUI to search for specific queries.</p><p>As mentioned before, the GUI for that is far from being intuitive, but it exists!<br>Let&rsquo;s do it step by step - you need to:</p><ol><li>Open the <code>Tracked Queries</code> dashboard (you can also open this dashboard from the <code>Top Resource Consuming Queries</code> by clicking the &ldquo;target&rdquo; icon that will one the selected query)</li></ol><p><img src=/img/2024/0129/TrackedQueriesDashboard.png alt="Tracked Queries dashboards"></p><p>This will open the dashboard:</p><p><img src=/img/2024/0129/TrackedQueriesAfterOpen.png alt="Tracked Queries After Open">
 </p><ol start=2><li>In the top left corner, click on the magnifier glass that is between the <code>Please enter a query ID</code> and the <code>Play</code> button</li></ol><p><img src=/img/2024/0129/ClickMagnifierGlass.png alt="Magnifier glass">
 </p><ol start=3><li>A new screen will pop up!<br>On that screen, you have a top white text box (red rectangle). There, type a portion of the query text you want to find. At the end of the text box, we have another magnifier glass button. Click on that button to trigger the search (or hit <code>Enter</code>).</li></ol><p><img src=/img/2024/0129/QuerySearchWindow.png alt="Query Search Window">
 </p><ol start=4><li>If something can be found, it will be listed below. You can mouse hover to see (as a tooltip) the query text, which can give you an idea if it is the one you want to find.</li></ol><p><img src=/img/2024/0129/QuerySearchWindowResults.png alt="Query Search Window Results">
 </p><ol start=5><li><p>Select the row containing the query you want to analyze and click <code>OK</code><br> </p></li><li><p>That will put the <code>Query ID</code> where before we had that <code>Please enter a query ID</code> placeholder (red rectangle). Now, you can hit the <code>Play</code> button (green rectangle) so it will do the search for that query ID and show some Query Store graphics.</p></li></ol><p><img src=/img/2024/0129/QueryIdFufilHitPlay.png alt="Query ID Fulfil - Hit Play">
 </p><ol start=7><li>That will show some results</li></ol><p><img src=/img/2024/0129/ResultAfterHitPlay.png alt="Query ID Fulfil - Hit Play"></p><p>Not bad!</p><h2 id=that-seems-very-limited>&ldquo;That seems very limited&rdquo;</h2><p>If you weren&rsquo;t aware of it until now, this is another &ldquo;tool&rdquo; on your belt. It&rsquo;s something! 😉<br>I would say is better than nothing.
To be fair depending on the size of your Query Store the search works relatively fast.</p><p>However, if you, like me, kind of live inside SSMS and do a lot of performance tuning analysis, I would suggest you take a look at <a href=https://github.com/erikdarlingdata/DarlingData/tree/main/sp_QuickieStore target=_blank rel="noopener noreferrer">sp_QuickieStore
</a>from Erik Darling (<a href=https://erikdarling.com/blog/ target=_blank rel="noopener noreferrer">
blog
</a>).</p><p>This stored procedure allows you to do much more granular filtering using a lot of different parameters and is way faster then the GUI.</p><p><a href=/img/2024/0129/sp_QuickieStoreSearch.png><img src=/img/2024/0129/sp_QuickieStoreSearch.png alt="sp_QuickieStore example"></a></p><p>With the results, you can pick the <code>query_Id</code> you want and use it directly on the dashboard if you want.</p><h2 id=whats-my-use-case>What&rsquo;s my use case?</h2><p>My real-life examples are when I want to take some screenshots to share with clients to show/explain a performance gain/degradation or even a pattern. You may have different reasons.</p><p>Hope you find it useful.<br>Thanks for reading it.</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=/tags/QueryStore/>QueryStore</a>
<a class="tag tag--primary tag--small" href=/tags/SQLServer/>SQLServer</a>
<a class="tag tag--primary tag--small" href=/tags/performance/>performance</a>
<a class="tag tag--primary tag--small" href=/tags/syndicated/>syndicated</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=/2024/02/01/Query-Store-How-to-open-multiple-instances-of-the-Tracked-Queries-dashboard/ data-tooltip="Query Store: How to open multiple instances of the 'Tracked Queries' dashboard" aria-label="NEXT: Query Store: How to open multiple instances of the 'Tracked Queries' dashboard"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=/2022/06/07/dbatools-Exceptions/ data-tooltip="dbatools - Exceptions" aria-label="PREVIOUS: dbatools - Exceptions"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://claudioessilva.eu/2024/01/29/Search-for-queries-with-Query-Store-GUI/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://claudioessilva.eu/2024/01/29/Search-for-queries-with-Query-Store-GUI/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://claudioessilva.eu/2024/01/29/Search-for-queries-with-Query-Store-GUI/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div><div class=comments><script src=https://utteranc.es/client.js repo=ClaudioESSilva/blog-comments issue-term=og:title theme=github-light crossorigin=anonymous async></script></div></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2024 Cláudio Silva. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=/2024/02/01/Query-Store-How-to-open-multiple-instances-of-the-Tracked-Queries-dashboard/ data-tooltip="Query Store: How to open multiple instances of the 'Tracked Queries' dashboard" aria-label="NEXT: Query Store: How to open multiple instances of the 'Tracked Queries' dashboard"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=/2022/06/07/dbatools-Exceptions/ data-tooltip="dbatools - Exceptions" aria-label="PREVIOUS: dbatools - Exceptions"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://claudioessilva.eu/2024/01/29/Search-for-queries-with-Query-Store-GUI/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://claudioessilva.eu/2024/01/29/Search-for-queries-with-Query-Store-GUI/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://claudioessilva.eu/2024/01/29/Search-for-queries-with-Query-Store-GUI/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-times"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fclaudioessilva.eu%2F2024%2F01%2F29%2FSearch-for-queries-with-Query-Store-GUI%2F" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fclaudioessilva.eu%2F2024%2F01%2F29%2FSearch-for-queries-with-Query-Store-GUI%2F" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fclaudioessilva.eu%2F2024%2F01%2F29%2FSearch-for-queries-with-Query-Store-GUI%2F" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i><span>Share on Linkedin</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src=https://claudioessilva.eu/img/avatar.jpg alt="Author's picture"><h4 id=about-card-name>Cláudio Silva</h4><div id=about-card-bio>Data Platform Architect and PowerShell lover.</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Data Platform Architect</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Portugal</div></div></div><div id=cover style=background-image:url(https://claudioessilva.eu/images/cover_bridge.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://claudioessilva.eu/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script><script>$(document).ready(function(){hljs.configure({classPrefix:"",useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(e,t){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(t)})})</script></body></html>