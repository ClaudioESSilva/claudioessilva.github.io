<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>TSQL on Cláudio Silva's Blog</title><link>https://claudioessilva.eu/tags/TSQL/</link><description>Recent content in TSQL on Cláudio Silva's Blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Mon, 05 Aug 2024 10:00:00 +0000</lastBuildDate><atom:link href="https://claudioessilva.eu/tags/TSQL/index.xml" rel="self" type="application/rss+xml"/><item><title>How much space can I expect to recover from a rebuild after dropping a column?</title><link>https://claudioessilva.eu/2024/08/05/How-much-space-can-I-expect-to-recover-from-a-rebuild-after-dropping-a-column/</link><pubDate>Mon, 05 Aug 2024 10:00:00 +0000</pubDate><guid>https://claudioessilva.eu/2024/08/05/How-much-space-can-I-expect-to-recover-from-a-rebuild-after-dropping-a-column/</guid><description>&lt;p>In my last article - &lt;a href="https://www.sqlservercentral.com/articles/identify-tables-with-dropped-columns"

 
 target="_blank" rel="noopener noreferrer"
>
 Identify Tables With Dropped Columns
&lt;/a>
 - we saw how we can identify tables that have columns that were dropped. &lt;br>
Today, we are going to check a way to approximately calculate how much space we can expect to recover if we rebuild our table.&lt;/p>
&lt;p>If you want to read the 1st article I published on this subject, you can read it here - &lt;a href="https://www.sqlservercentral.com/articles/what-happens-when-we-drop-a-column-on-a-sql-server-table-wheres-my-space"

 
 target="_blank" rel="noopener noreferrer"
>
 What happens when we drop a column on a SQL Server table? Where&amp;rsquo;s my space?
&lt;/a>
&lt;/p></description></item><item><title>Identify Tables With Dropped Columns</title><link>https://claudioessilva.eu/2024/07/09/Identify-Tables-With-Dropped-Columns/</link><pubDate>Tue, 09 Jul 2024 10:00:00 +0000</pubDate><guid>https://claudioessilva.eu/2024/07/09/Identify-Tables-With-Dropped-Columns/</guid><description>&lt;p>On my last article - &lt;a href="https://claudioessilva.eu/2024/05/29/What-happens-when-we-drop-a-column-on-a-SQL-Server-table-Wheres-my-space/"

 
 target="_blank" rel="noopener noreferrer"
>
 What happens when we drop a column on a SQL Server table? Where&amp;rsquo;s my space?
&lt;/a>
 - I have shown what happens when we drop a column from a table.&lt;br>
Today, we are going to check if we have a way to find tables with dropped columns.&lt;/p>
&lt;h2 id="why">Why?&lt;/h2>
&lt;p>As we learnt, when we drop a column this is just a metadata operation and won’t clear the space that was being used. You may be asking - Do I have more tables with dropped columns that I’m not aware of? - And that is a legit question.&lt;br>
Let&amp;rsquo;s see how we can achieve this.&lt;/p></description></item><item><title>What happens when we drop a column on a SQL Server table? Where's my space?</title><link>https://claudioessilva.eu/2024/05/29/What-happens-when-we-drop-a-column-on-a-SQL-Server-table-Wheres-my-space/</link><pubDate>Wed, 29 May 2024 11:00:00 +0000</pubDate><guid>https://claudioessilva.eu/2024/05/29/What-happens-when-we-drop-a-column-on-a-SQL-Server-table-Wheres-my-space/</guid><description>&lt;blockquote>
&lt;p>This article was initially posted on &lt;a href="https://www.sqlservercentral.com/articles/what-happens-when-we-drop-a-column-on-a-sql-server-table-wheres-my-space"

 
 target="_blank" rel="noopener noreferrer"
>
 SQLServerCentral
&lt;/a>
 @ 2024-04-26.&lt;/p>&lt;/blockquote>
&lt;p>Short answer: The column is marked as &amp;lsquo;deleted&amp;rsquo; and will stop being visible/usable.&lt;br>
But, most importantly - &lt;strong>The record/table size will remain unchanged&lt;/strong>.&lt;/p>
&lt;h1 id="a-metadata-operation">A metadata operation&lt;/h1>
&lt;p>Dropping a column is a metadata/logical operation, not a physical one. This means that the data isn&amp;rsquo;t removed/overwritten by this action.&lt;/p>
&lt;p>If we were talking about deleting data (records), as Paul Randal mentions &lt;a href="https://www.sqlskills.com/blogs/paul/inside-the-storage-engine-anatomy-of-a-page/"

 
 target="_blank" rel="noopener noreferrer"
>
 here
&lt;/a>
:&lt;/p></description></item><item><title>Check Azure SQL DB Space Used</title><link>https://claudioessilva.eu/2024/05/02/Check-Azure-SQL-DB-Space-Used/</link><pubDate>Thu, 02 May 2024 11:00:00 +0000</pubDate><guid>https://claudioessilva.eu/2024/05/02/Check-Azure-SQL-DB-Space-Used/</guid><description>&lt;p>A couple of days ago I was doing some cleaning on some Azure SQL DBs and shrinking some files to lower the bill.&lt;br>
To check my progress I needed to check the size before/after the task in an easy way for multiple Azure SQL DBs.&lt;/p>
&lt;h2 id="check-azure-sql-db-storage-space-for-1-database">Check Azure SQL DB storage space for 1 database&lt;/h2>
&lt;p>If you need to check the storage space being used by 1 Azure SQL DB, that is as easy as jumping on the portal, select the desired database and you can find the information in the Overview. This is shown below.&lt;/p></description></item><item><title>Using Common Table Expression (CTE) - Did you know...</title><link>https://claudioessilva.eu/2017/11/30/Using-Common-Table-Expression-CTE-Did-you-know.../</link><pubDate>Thu, 30 Nov 2017 00:00:00 +0000</pubDate><guid>https://claudioessilva.eu/2017/11/30/Using-Common-Table-Expression-CTE-Did-you-know.../</guid><description>&lt;p>Today I will write just a short blog post to do a quick reminder!&lt;/p>
&lt;p>I still hear a lot of people suggesting CTEs because they think it works like a temporary table (you populate the table and then it can be/is reutilized).&lt;/p>
&lt;p>It doesn&amp;rsquo;t!&lt;/p>
&lt;p>From de &lt;a href="https://docs.microsoft.com/en-us/sql/t-sql/queries/with-common-table-expression-transact-sql"

 
 target="_blank" rel="noopener noreferrer"
>
 documentation
&lt;/a>
:&lt;/p>
&lt;blockquote>
&lt;p>Specifies a &lt;strong>temporary&lt;/strong> named result set, known as a common table expression (CTE).&lt;/p>&lt;/blockquote>
&lt;p>Maybe they are focusing on the &amp;ldquo;&lt;strong>temporary&lt;/strong>&amp;rdquo; word.&lt;/p></description></item></channel></rss>