<meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta property="og:image" content="https://claudioessilva.eu/"><!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"http://schema.org","@type":"Website","@id":"https:\/\/claudioessilva.eu","author":{"@type":"Person","name":"Cláudio Silva","image":"https://claudioessilva.eu/img/avatar.jpg"},"name":"Cláudio Silva\u0027s Blog","description":"This month’s T-SQL Tuesday is brought by Steve Jones (b | t) and he wants to know if triggers causes headaches or happiness to us.\nThis is the 106nd edition of TSQL2sDay - an Adam Machanic (b | t) brainchild.\nTriggers are those kind of database objects that sometimes are the best bet but most of the times they will strike back.\n\u0026ldquo;Why?\u0026rdquo; - You may ask. From my experience triggers are objects that we \u0026ldquo;tend\u0026rdquo; to forget are there, and only when we hit a problem and, sometimes, after digging into the problem we end by saying something like","url":"https:\/\/claudioessilva.eu\/2018\/09\/11\/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106\/","keywords":"[]"}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.102.3 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="Cláudio Silva"><meta name=keywords content><meta name=description content="This month’s T-SQL Tuesday is brought by Steve Jones (b | t) and he wants to know if triggers causes headaches or happiness to us.
This is the 106nd edition of TSQL2sDay - an Adam Machanic (b | t) brainchild.
Triggers are those kind of database objects that sometimes are the best bet but most of the times they will strike back.
&ldquo;Why?&rdquo; - You may ask. From my experience triggers are objects that we &ldquo;tend&rdquo; to forget are there, and only when we hit a problem and, sometimes, after digging into the problem we end by saying something like"><meta property="og:description" content="This month’s T-SQL Tuesday is brought by Steve Jones (b | t) and he wants to know if triggers causes headaches or happiness to us.
This is the 106nd edition of TSQL2sDay - an Adam Machanic (b | t) brainchild.
Triggers are those kind of database objects that sometimes are the best bet but most of the times they will strike back.
&ldquo;Why?&rdquo; - You may ask. From my experience triggers are objects that we &ldquo;tend&rdquo; to forget are there, and only when we hit a problem and, sometimes, after digging into the problem we end by saying something like"><meta property="og:type" content="article"><meta property="og:title" content="Triggers: The hidden logic that will strike back - TSQL Tuesday #106"><meta name=twitter:title content="Triggers: The hidden logic that will strike back - TSQL Tuesday #106"><meta property="og:url" content="https://claudioessilva.eu/2018/09/11/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106/"><meta property="twitter:url" content="https://claudioessilva.eu/2018/09/11/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106/"><meta property="og:site_name" content="Cláudio Silva's Blog"><meta property="og:description" content="This month’s T-SQL Tuesday is brought by Steve Jones (b | t) and he wants to know if triggers causes headaches or happiness to us.
This is the 106nd edition of TSQL2sDay - an Adam Machanic (b | t) brainchild.
Triggers are those kind of database objects that sometimes are the best bet but most of the times they will strike back.
&ldquo;Why?&rdquo; - You may ask. From my experience triggers are objects that we &ldquo;tend&rdquo; to forget are there, and only when we hit a problem and, sometimes, after digging into the problem we end by saying something like"><meta name=twitter:description content="This month’s T-SQL Tuesday is brought by Steve Jones (b | t) and he wants to know if triggers causes headaches or happiness to us.
This is the 106nd edition of TSQL2sDay - an Adam Machanic (b | t) brainchild.
Triggers are those kind of database objects that sometimes are the best bet but most of the times they will strike back.
&ldquo;Why?&rdquo; - You may ask. From my experience triggers are objects that we &ldquo;tend&rdquo; to forget are there, and only when we hit a problem and, sometimes, after digging into the problem we end by saying something like"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2018-09-11T00:00:00"><meta property="article:modified_time" content="2018-09-11T00:00:00"><meta property="article:tag" content="SQLServer"><meta property="article:tag" content="syndicated"><meta property="article:tag" content="triggers"><meta property="article:tag" content="TSQL2sDay"><meta name=twitter:card content="summary"><meta name=twitter:site content="@claudioessilva"><meta name=twitter:creator content="@claudioessilva"><meta property="og:image" content="https://claudioessilva.eu/img/avatar.jpg"><meta property="twitter:image" content="https://claudioessilva.eu/img/avatar.jpg"><title>Triggers: The hidden logic that will strike back - TSQL Tuesday #106</title><link rel=icon href=https://claudioessilva.eu/img/favicon.jpg><link rel=canonical href=https://claudioessilva.eu/2018/09/11/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://claudioessilva.eu/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-27703765-1","auto"),ga("send","pageview"))</script></head><body><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=/ aria-label="Go to homepage">Cláudio Silva's Blog</a></div><a class=header-right-picture href=/#about aria-label="Open the link: /#about"><img class=header-picture src=https://claudioessilva.eu/img/avatar.jpg alt="Author's picture"></a></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=/#about aria-label="Read more about the author"><img class=sidebar-profile-picture src=https://claudioessilva.eu/img/avatar.jpg alt="Author's picture"></a><h4 class=sidebar-profile-name>Cláudio Silva</h4><h5 class=sidebar-profile-bio>Data Platform Architect and PowerShell lover.</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i>
<span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/#about title=About><i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i>
<span class=sidebar-button-desc>About</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/claudioessilva target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://twitter.com/claudioessilva target=_blank rel=noopener title=Twitter><i class="sidebar-button-icon fab fa-lg fa-twitter" aria-hidden=true></i>
<span class=sidebar-button-desc>Twitter</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://www.linkedin.com/in/claudioessilva target=_blank rel=noopener title=LinkedIn><i class="sidebar-button-icon fab fa-lg fa-linkedin" aria-hidden=true></i>
<span class=sidebar-button-desc>LinkedIn</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/index.xml title=RSS><i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden=true></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul></div><div class=sidebar-container><div style=color:#ebebeb;font-size:25px;text-align:center>dbatools book</div><div style=color:#ebebeb;font-size:15px>Now available! Buy it at manning.com - 50% off with code bldbatools50</div><a href="https://www.manning.com/books/learn-dbatools-in-a-month-of-lunches?utm_source=claudioessilva&utm_medium=affiliate&utm_campaign=affiliate&a_aid=claudioessilva" target=_blank><center><img src=https://images.manning.com/264/352/resize/book/0/998b76f-982a-4661-a020-5d94909f7ea5/LeMaire-HI.png height=300></center></a></div></nav><div id=main data-behavior=4 class=hasCoverMetaIn><article class=post id=top><div class="post-header main-content-wrap text-left"><h1 class=post-title>Triggers: The hidden logic that will strike back - TSQL Tuesday #106</h1><div class="postShorten-meta post-meta"><time datetime=2018-09-11T00:00:00Z>September 11, 2018</time></div></div><div class="post-content markdown"><div class=main-content-wrap><p><a href=https://voiceofthedba.com/2018/09/03/t-sql-tuesday-106-trigger-headaches-or-happiness/><img src=/img/2017/09/tsql2sday.jpg alt=(TSQL2sDay)></a></p><p>This month’s T-SQL Tuesday is brought by Steve Jones (<a href=https://voiceofthedba.com>b</a> | <a href=https://twitter.com/way0utwest>t</a>) and he wants to know if triggers causes headaches or happiness to us.</p><p>This is the 106nd edition of <a href=http://tsqltuesday.com/>TSQL2sDay</a> - an Adam Machanic (<a href=http://dataeducation.com/blog/>b</a> | <a href=https://twitter.com/AdamMachanic>t</a>) brainchild.</p><p> 
<a href=https://docs.microsoft.com/en-us/sql/t-sql/statements/create-trigger-transact-sql>Triggers</a> are those kind of database objects that sometimes are the best bet but most of the times they will strike back.</p><h3 id=why---you-may-ask>&ldquo;Why?&rdquo; - You may ask.</h3><p>From my experience triggers are objects that we &ldquo;tend&rdquo; to forget are there, and only when we hit a problem and, sometimes, after digging into the problem we end by saying something like</p><blockquote><p>wait..but why is the value different from what I have used?! Ohh&mldr;maybe the table has some triggers.</p></blockquote><p>Yes, it has already been uttered by me before. For me, triggers are a hole of possible business logic written and forgotten&mldr;forever.
Let me just clarify the meaning of &ldquo;forever&rdquo; here - until you hit a problem or you need to rewrite some logic and the result is not what you expect. Again, because the code is &lsquo;hidden&rsquo;.</p><h3 id=recent-pain---a-project-to-migrate-firebird-sql-to-t-sql>Recent pain - A project to migrate Firebird SQL to T-SQL</h3><p>When Steve mention the &ldquo;I think I’ve ended up using triggers in 0.01% of my tables or less.&rdquo; I remember this project and after the math I can say they used ~78,84% and ~63,32% (were two databases) of triggers on their tables.</p><p>When looking at their code it became obvious the type of use they are making, mainly to fill 1-2 columns with current datetime and/or to generate a new ID (because they didn&rsquo;t use identity columns - supported on v3.0 or higher)</p><h3 id=you-never-used-triggers-its-what-you-are-saying>&ldquo;You never used triggers, it&rsquo;s what you are saying?&rdquo;</h3><p>No, it&rsquo;s not. I have used them before and not only 0,01% but maybe less than 5%.</p><h4 id=let-me-share-an-story>Let me share an story</h4><p>Back in the earlier times when I was a full-time T-SQL developer (I think was on 2008/2009), I worked with an application that use triggers to insert data on some tombstone tables that help to go back and get the data at that time.
Nowadays, we can achieve this with much less code using <a href=https://docs.microsoft.com/en-us/sql/relational-databases/tables/temporal-tables>temporal tables</a>.</p><p>One day I hit an issue where the record on the main table wasn&rsquo;t being inserted, I run the code, a stored procedure, with some parameters and I got back a new ID (we had identity columns) all good. When I ran with other parameters (the ones not working) I didn&rsquo;t see the new ID, I went back and forward and seeing the gaps generated by the problematic parameter set, throw some debug messages into the stored procedure, also throwing more information on the catch block to understand the problem.</p><p>Then, after reading the message carefully I saw that the problem was on the insert on my tombstone table and not on my &ldquo;visible&rdquo; logic. Spent about <code>one hour</code> to get it&mldr;</p><h4 id=waste-of-time>Waste of time</h4><p>Or not, from that day on, one of my first questions when I hear people have some problems like this is to ask &ldquo;are there any triggers on the tables involved?&rdquo;</p><p>With that I already saved some hours of work.</p><h2 id=wrap-up>Wrap up</h2><p>As you may understand I decided to not use triggers whenever possible, but, sometimes we pick the train already in movement and we may need them.
If you fit on this last scenario, please, please document it very well!</p><p>I&rsquo;m eager to read other&rsquo;s stories because I bet they also have some good points and on this interesting topic.</p><p>Thanks for reading.</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=/tags/SQLServer/>SQLServer</a>
<a class="tag tag--primary tag--small" href=/tags/syndicated/>syndicated</a>
<a class="tag tag--primary tag--small" href=/tags/triggers/>triggers</a>
<a class="tag tag--primary tag--small" href=/tags/TSQL2sDay/>TSQL2sDay</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=/2018/09/12/SQL-Server-Operations-Studio-and-VSCode-The-wrong-default-datetimeoffset-format/ data-tooltip="SQL Server Operations Studio and VSCode: The wrong default datetimeoffset format" aria-label="NEXT: SQL Server Operations Studio and VSCode: The wrong default datetimeoffset format"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=/2018/09/05/I-will-be-speaking-SQLSaturday-795-Porto/ data-tooltip="I will be speaking @ SQLSaturday 795 Porto" aria-label="PREVIOUS: I will be speaking @ SQLSaturday 795 Porto"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://claudioessilva.eu/2018/09/11/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://claudioessilva.eu/2018/09/11/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://claudioessilva.eu/2018/09/11/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div><div class=comments><script src=https://utteranc.es/client.js repo=ClaudioESSilva/blog-comments issue-term=og:title theme=github-light crossorigin=anonymous async></script></div></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2022 Cláudio Silva. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=/2018/09/12/SQL-Server-Operations-Studio-and-VSCode-The-wrong-default-datetimeoffset-format/ data-tooltip="SQL Server Operations Studio and VSCode: The wrong default datetimeoffset format" aria-label="NEXT: SQL Server Operations Studio and VSCode: The wrong default datetimeoffset format"><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=/2018/09/05/I-will-be-speaking-SQLSaturday-795-Porto/ data-tooltip="I will be speaking @ SQLSaturday 795 Porto" aria-label="PREVIOUS: I will be speaking @ SQLSaturday 795 Porto"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label="Share this post"><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://claudioessilva.eu/2018/09/11/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106/" title="Share on Facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://claudioessilva.eu/2018/09/11/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106/" title="Share on Twitter" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://claudioessilva.eu/2018/09/11/Triggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-#106/" title="Share on Linkedin" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label="Back to top"><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-times"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fclaudioessilva.eu%2F2018%2F09%2F11%2FTriggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-%23106%2F" aria-label="Share on Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fclaudioessilva.eu%2F2018%2F09%2F11%2FTriggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-%23106%2F" aria-label="Share on Twitter"><i class="fab fa-twitter" aria-hidden=true></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fclaudioessilva.eu%2F2018%2F09%2F11%2FTriggers-The-hidden-logic-that-will-strike-back-TSQL-Tuesday-%23106%2F" aria-label="Share on Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i><span>Share on Linkedin</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src=https://claudioessilva.eu/img/avatar.jpg alt="Author's picture"><h4 id=about-card-name>Cláudio Silva</h4><div id=about-card-bio>Data Platform Architect and PowerShell lover.</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Data Platform Architect</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Portugal</div></div></div><div id=cover style=background-image:url(https://claudioessilva.eu/images/cover_bridge.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://claudioessilva.eu/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script>
<script>$(document).ready(function(){hljs.configure({classPrefix:"",useBR:!1}),$("pre.code-highlight > code, pre > code").each(function(e,t){$(this).hasClass("codeblock")||$(this).addClass("codeblock"),hljs.highlightBlock(t)})})</script></body></html>